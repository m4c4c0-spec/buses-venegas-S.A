2025-12-06 00:03:12.842 INFO  [c.v.buses_api.BusesApiApplication] - Starting BusesApiApplication using Java 21.0.9 with PID 8560 (C:\Users\M4c4c0\Documents\GitHub\buses-venegas-S.A\backend\buses-api\build\classes\java\main started by M4c4c0 in C:\Users\M4c4c0\Documents\GitHub\buses-venegas-S.A\backend\buses-api)
2025-12-06 00:03:12.846 DEBUG [c.v.buses_api.BusesApiApplication] - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-12-06 00:03:12.846 INFO  [c.v.buses_api.BusesApiApplication] - No active profile set, falling back to 1 default profile: "default"
2025-12-06 00:03:15.243 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-06 00:03:15.246 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-06 00:03:15.667 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 387 ms. Found 5 JPA repository interfaces.
2025-12-06 00:03:15.700 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-06 00:03:15.703 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-06 00:03:15.748 INFO  [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data Redis - Could not safely identify store assignment for repository candidate interface cl.venegas.buses_api.infrastructure.persistence.jpa.repo.BookingJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-06 00:03:15.748 INFO  [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data Redis - Could not safely identify store assignment for repository candidate interface cl.venegas.buses_api.infrastructure.persistence.jpa.repo.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-06 00:03:15.749 INFO  [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data Redis - Could not safely identify store assignment for repository candidate interface cl.venegas.buses_api.infrastructure.persistence.jpa.repo.SeatHoldJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-06 00:03:15.750 INFO  [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data Redis - Could not safely identify store assignment for repository candidate interface cl.venegas.buses_api.infrastructure.persistence.jpa.repo.TripJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-06 00:03:15.752 INFO  [o.s.d.r.c.RepositoryConfigurationExtensionSupport] - Spring Data Redis - Could not safely identify store assignment for repository candidate interface cl.venegas.buses_api.infrastructure.persistence.jpa.repo.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-06 00:03:15.752 INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 28 ms. Found 0 Redis repository interfaces.
2025-12-06 00:03:16.918 INFO  [o.s.b.w.e.tomcat.TomcatWebServer] - Tomcat initialized with port 8080 (http)
2025-12-06 00:03:16.945 INFO  [o.a.coyote.http11.Http11NioProtocol] - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-06 00:03:16.948 INFO  [o.a.catalina.core.StandardService] - Starting service [Tomcat]
2025-12-06 00:03:16.948 INFO  [o.a.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-12-06 00:03:17.083 INFO  [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring embedded WebApplicationContext
2025-12-06 00:03:17.084 INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 4159 ms
2025-12-06 00:03:17.765 INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-12-06 00:03:18.122 INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5e020dd1
2025-12-06 00:03:18.125 INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-12-06 00:03:18.171 INFO  [org.flywaydb.core.FlywayExecutor] - Database: jdbc:postgresql://localhost:5433/buses (PostgreSQL 17.7)
2025-12-06 00:03:18.294 INFO  [o.f.core.internal.command.DbValidate] - Successfully validated 9 migrations (execution time 00:00.083s)
2025-12-06 00:03:18.319 INFO  [o.f.core.internal.command.DbMigrate] - Current version of schema "public": 9
2025-12-06 00:03:18.325 INFO  [o.f.core.internal.command.DbMigrate] - Schema "public" is up to date. No migration necessary.
2025-12-06 00:03:19.343 INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-06 00:03:19.477 WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-06 00:03:21.504 WARN  [o.h.t.s.i.ExceptionHandlerLoggedImpl] - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists users 
       add column updated_at timestamp(6) not null" via JDBC [ERROR: la columna «updated_at» de la relación «users» contiene valores null]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists users 
       add column updated_at timestamp(6) not null" via JDBC [ERROR: la columna «updated_at» de la relación «users» contiene valores null]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cl.venegas.buses_api.BusesApiApplication.main(BusesApiApplication.java:12)
Caused by: org.postgresql.util.PSQLException: ERROR: la columna «updated_at» de la relación «users» contiene valores null
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 37 common frames omitted
2025-12-06 00:03:21.528 INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-06 00:03:22.588 WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-06 00:03:22.647 WARN  [o.s.b.a.s.s.UserDetailsServiceAutoConfiguration] - 

Using generated security password: 2ca0e81f-cf51-4da2-88a3-cdf5eb68ea80

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-12-06 00:03:22.674 INFO  [o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer] - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-12-06 00:03:23.820 INFO  [o.s.b.a.e.web.EndpointLinksResolver] - Exposing 2 endpoints beneath base path '/actuator'
2025-12-06 00:03:24.745 INFO  [o.a.coyote.http11.Http11NioProtocol] - Starting ProtocolHandler ["http-nio-8080"]
2025-12-06 00:03:24.775 INFO  [o.s.b.w.e.tomcat.TomcatWebServer] - Tomcat started on port 8080 (http) with context path '/'
2025-12-06 00:03:24.796 INFO  [c.v.buses_api.BusesApiApplication] - Started BusesApiApplication in 13.26 seconds (process running for 13.969)
2025-12-06 00:03:24.832 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:03:25.082 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:04:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:04:24.821 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:05:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:05:24.821 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:06:24.827 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:06:24.827 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:07:24.821 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:07:24.825 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:07:43.569 INFO  [o.a.c.c.C.[Tomcat].[localhost].[/]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-06 00:07:43.569 INFO  [o.s.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-12-06 00:07:43.573 INFO  [o.s.web.servlet.DispatcherServlet] - Completed initialization in 3 ms
2025-12-06 00:07:43.770 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Puerto Montt, date=2025-12-10
2025-12-06 00:07:43.787 WARN  [c.v.b.i.w.controller.TripsController] - No se encontraron viajes: origin=Valdivia, destination=Puerto Montt, date=2025-12-10
2025-12-06 00:07:49.423 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Puerto Montt, date=2025-12-09
2025-12-06 00:07:49.433 WARN  [c.v.b.i.w.controller.TripsController] - No se encontraron viajes: origin=Valdivia, destination=Puerto Montt, date=2025-12-09
2025-12-06 00:07:54.263 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Puerto Montt, date=2025-12-08
2025-12-06 00:07:54.274 WARN  [c.v.b.i.w.controller.TripsController] - No se encontraron viajes: origin=Valdivia, destination=Puerto Montt, date=2025-12-08
2025-12-06 00:07:57.256 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Puerto Montt, date=2025-12-07
2025-12-06 00:07:57.264 WARN  [c.v.b.i.w.controller.TripsController] - No se encontraron viajes: origin=Valdivia, destination=Puerto Montt, date=2025-12-07
2025-12-06 00:08:02.060 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Puerto Montt, date=2025-12-07
2025-12-06 00:08:02.068 WARN  [c.v.b.i.w.controller.TripsController] - No se encontraron viajes: origin=Valdivia, destination=Puerto Montt, date=2025-12-07
2025-12-06 00:08:09.118 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Valdivia, destination=Santiago, date=2025-12-07
2025-12-06 00:08:09.161 INFO  [c.v.b.i.w.controller.TripsController] - Búsqueda completada: encontrados 13 viajes
2025-12-06 00:08:24.811 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:08:24.811 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:09:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:09:24.824 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:09:24.909 INFO  [c.v.b.i.w.c.BookingsController] - Recibido POST /api/v1/bookings: tripId=1893, userId=1, seatsCount=1
2025-12-06 00:09:24.913 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Iniciando creación de reserva: tripId=1893, userId=1, seatsCount=1
2025-12-06 00:09:24.941 DEBUG [c.v.b.a.u.b.CreateBookingUseCase] - Reteniendo asientos: [2]
2025-12-06 00:09:25.075 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Reserva creada exitosamente: bookingId=5, status=PENDIENTE, expiresAt=2025-12-06T00:24:24.941700300
2025-12-06 00:09:25.092 INFO  [c.v.b.i.w.c.BookingsController] - Reserva creada exitosamente: bookingId=5, totalAmount=15000
2025-12-06 00:09:56.653 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Iniciando procesamiento de pago: bookingId=5, method=TARJETA_CREDITO
2025-12-06 00:09:56.693 DEBUG [c.v.b.a.u.p.ProcessPaymentService] - Procesando pago con gateway: bookingId=5, amount=15000.00
2025-12-06 00:09:56.732 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Iniciando procesamiento de pago - BookingId: 5, Monto: $15000.00, Método: TARJETA_CREDITO
2025-12-06 00:09:56.732 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Simulando delay de procesamiento: 1494ms
2025-12-06 00:09:58.268 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Pago procesado exitosamente - TransactionId: TXN-EF1EEBC2, BookingId: 5
2025-12-06 00:09:58.268 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Gateway response: {"status":"APPROVED","transactionId":"TXN-EF1EEBC2","bookingId":5,"amount":15000,00,"method":"TARJETA_CREDITO","timestamp":"2025-12-06T00:09:58.229450200"}
2025-12-06 00:09:58.270 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Resultado de pago: bookingId=5, status=APROBADO, txId=TXN-EF1EEBC2
2025-12-06 00:09:58.281 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Reserva confirmada tras pago exitoso: bookingId=5
2025-12-06 00:10:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:10:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:11:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:11:24.820 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:12:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:12:24.826 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:13:24.827 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:13:24.828 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:14:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:14:24.814 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:14:40.427 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Victoria, destination=Temuco, date=2025-12-09
2025-12-06 00:14:40.440 INFO  [c.v.b.i.w.controller.TripsController] - Búsqueda completada: encontrados 13 viajes
2025-12-06 00:15:24.812 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:15:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:16:24.813 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:16:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:16:56.122 INFO  [c.v.b.i.w.c.BookingsController] - Recibido POST /api/v1/bookings: tripId=5220, userId=1, seatsCount=1
2025-12-06 00:16:56.126 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Iniciando creación de reserva: tripId=5220, userId=1, seatsCount=1
2025-12-06 00:16:56.129 DEBUG [c.v.b.a.u.b.CreateBookingUseCase] - Reteniendo asientos: [13]
2025-12-06 00:16:56.138 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Reserva creada exitosamente: bookingId=6, status=PENDIENTE, expiresAt=2025-12-06T00:31:56.129622100
2025-12-06 00:16:56.178 INFO  [c.v.b.i.w.c.BookingsController] - Reserva creada exitosamente: bookingId=6, totalAmount=4000
2025-12-06 00:17:24.814 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:17:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:18:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:18:24.822 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:18:49.468 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Iniciando procesamiento de pago: bookingId=6, method=TARJETA_DEBITO
2025-12-06 00:18:49.483 DEBUG [c.v.b.a.u.p.ProcessPaymentService] - Procesando pago con gateway: bookingId=6, amount=4000.00
2025-12-06 00:18:49.483 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Iniciando procesamiento de pago - BookingId: 6, Monto: $4000.00, Método: TARJETA_DEBITO
2025-12-06 00:18:49.483 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Simulando delay de procesamiento: 1182ms
2025-12-06 00:18:50.667 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Pago procesado exitosamente - TransactionId: TXN-0CA5DBD0, BookingId: 6
2025-12-06 00:18:50.667 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Gateway response: {"status":"APPROVED","transactionId":"TXN-0CA5DBD0","bookingId":6,"amount":4000,00,"method":"TARJETA_DEBITO","timestamp":"2025-12-06T00:18:50.667672500"}
2025-12-06 00:18:50.667 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Resultado de pago: bookingId=6, status=APROBADO, txId=TXN-0CA5DBD0
2025-12-06 00:18:50.672 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Reserva confirmada tras pago exitoso: bookingId=6
2025-12-06 00:19:24.808 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:19:24.812 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:20:24.812 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:20:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:21:24.813 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:21:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:22:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:22:24.822 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:23:24.814 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:23:24.819 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:24:24.811 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:24:24.815 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:25:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:25:24.823 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:26:24.812 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:26:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:27:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:27:24.821 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:28:12.159 INFO  [c.v.b.i.w.controller.TripsController] - Recibido GET /api/v1/trips/search: origin=Victoria, destination=Temuco, date=2025-12-07
2025-12-06 00:28:12.182 INFO  [c.v.b.i.w.controller.TripsController] - Búsqueda completada: encontrados 13 viajes
2025-12-06 00:28:24.813 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:28:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:28:51.423 INFO  [c.v.b.i.w.c.BookingsController] - Recibido POST /api/v1/bookings: tripId=5118, userId=1, seatsCount=1
2025-12-06 00:28:51.425 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Iniciando creación de reserva: tripId=5118, userId=1, seatsCount=1
2025-12-06 00:28:51.429 DEBUG [c.v.b.a.u.b.CreateBookingUseCase] - Reteniendo asientos: [14]
2025-12-06 00:28:51.440 INFO  [c.v.b.a.u.b.CreateBookingUseCase] - Reserva creada exitosamente: bookingId=7, status=PENDIENTE, expiresAt=2025-12-06T00:43:51.429651800
2025-12-06 00:28:51.442 INFO  [c.v.b.i.w.c.BookingsController] - Reserva creada exitosamente: bookingId=7, totalAmount=4000
2025-12-06 00:29:15.594 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Iniciando procesamiento de pago: bookingId=7, method=TARJETA_CREDITO
2025-12-06 00:29:15.607 DEBUG [c.v.b.a.u.p.ProcessPaymentService] - Procesando pago con gateway: bookingId=7, amount=4000.00
2025-12-06 00:29:15.608 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Iniciando procesamiento de pago - BookingId: 7, Monto: $4000.00, Método: TARJETA_CREDITO
2025-12-06 00:29:15.608 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Simulando delay de procesamiento: 1131ms
2025-12-06 00:29:16.740 INFO  [c.v.b.i.p.HardcodedPaymentGateway] - Pago procesado exitosamente - TransactionId: TXN-E429ABBF, BookingId: 7
2025-12-06 00:29:16.740 DEBUG [c.v.b.i.p.HardcodedPaymentGateway] - Gateway response: {"status":"APPROVED","transactionId":"TXN-E429ABBF","bookingId":7,"amount":4000,00,"method":"TARJETA_CREDITO","timestamp":"2025-12-06T00:29:16.740703800"}
2025-12-06 00:29:16.740 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Resultado de pago: bookingId=7, status=APROBADO, txId=TXN-E429ABBF
2025-12-06 00:29:16.746 INFO  [c.v.b.a.u.p.ProcessPaymentService] - Reserva confirmada tras pago exitoso: bookingId=7
2025-12-06 00:29:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:29:24.822 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:30:24.827 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:30:24.827 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:31:24.831 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:31:24.836 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:32:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:32:24.826 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:33:24.828 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:33:24.837 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:34:24.813 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:34:24.817 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:35:24.806 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:35:24.809 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:36:24.808 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:36:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:37:24.815 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:37:24.815 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:38:24.807 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:38:24.811 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:39:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:39:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:40:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:40:24.814 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:41:24.810 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:41:24.815 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:42:24.814 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:42:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
2025-12-06 00:43:24.816 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Ejecutando limpieza de reservas expiradas...
2025-12-06 00:43:24.818 INFO  [c.v.b.a.task.ExpiredHoldsCleanupTask] - Limpieza completada.
